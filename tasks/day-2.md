# –î–µ–Ω—å 2: –í–∏–¥–µ–æ –∏ –∑–∞–º–µ—Ç–∫–∏ –≤ –ø–∞–ø–∫–∞—Ö
*–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–æ—Ç–∞: –ø—Ä–∏—ë–º –≤–∏–¥–µ–æ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –ø–æ –ø–∞–ø–∫–∞–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è*

---

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø—Ä–æ—à–ª–∏ **–î–µ–Ω—å 1** ([tasks/day-1.md](day-1.md)): —É –≤–∞—Å –µ—Å—Ç—å –±–æ—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ `/start`, `/help`, `/caps`, –∫–Ω–æ–ø–∫–∞–º–∏, –ø—Ä–∏—ë–º–æ–º —Ñ–æ—Ç–æ –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏ (–≤ –ø–∞–º—è—Ç–∏ –∏ –≤ `notes.json`). –°–µ–≥–æ–¥–Ω—è –º—ã –¥–æ–±–∞–≤–∏–º –ø—Ä–∏—ë–º –≤–∏–¥–µ–æ –∏ –ø–µ—Ä–µ–Ω–µ—Å—ë–º –∑–∞–º–µ—Ç–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üìπ –®–∞–≥ 1. –ü–∞–ø–∫–∞ –¥–ª—è –≤–∏–¥–µ–æ

–†–∞–Ω—å—à–µ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø–∞–ø–∫—É `images/` –¥–ª—è —Ñ–æ—Ç–æ. –¢–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è –≤–∏–¥–µ–æ ‚Äî —á—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∏—Å–ª–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏–∫–∏.

–î–æ–±–∞–≤—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ **—Ä—è–¥–æ–º —Å** `os.makedirs("images", ...)` (–ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö):

```python
os.makedirs("videos", exist_ok=True)
```

> üí° `exist_ok=True` –∑–Ω–∞—á–∏—Ç: ¬´—Å–æ–∑–¥–∞–π –ø–∞–ø–∫—É, –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ—Ç; –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å ‚Äî –Ω–µ —Ä—É–≥–∞–π—Å—è¬ª. –¢–∞–∫ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞.

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–∞–ø–∫–∞ `videos` (–æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π).

---

## üé¨ –®–∞–≥ 2. –ü—Ä–∏—ë–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ

–ü—Ä–∏—ë–º –≤–∏–¥–µ–æ –≤ Telegram –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ –ø—Ä–∏—ë–º —Ñ–æ—Ç–æ: —É —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å—Ç—å —Ç–∏–ø `video`, —É –Ω–µ–≥–æ –µ—Å—Ç—å `file_id` –∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É. –ú—ã –¥–µ–ª–∞–µ–º —Ç–æ –∂–µ, —á—Ç–æ —Å —Ñ–æ—Ç–æ: –ø–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ –Ω–∞ –¥–∏—Å–∫.

–î–æ–±–∞–≤—å—Ç–µ **–≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é** (—Ä—è–¥–æ–º —Å `last_photo_file_id`):

```python
last_video_file_id = None
```

–î–æ–±–∞–≤—å—Ç–µ **–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–∏–¥–µ–æ** (–º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Ñ–æ—Ç–æ):

```python
@bot.message_handler(content_types=['video'])
def handle_video(message):
    global last_video_file_id
    file_id = message.video.file_id
    last_video_file_id = file_id
    file_info = bot.get_file(file_id)
    downloaded_file = bot.download_file(file_info.file_path)
    with open(f"videos/{file_id}.mp4", 'wb') as f:
        f.write(downloaded_file)
    bot.reply_to(message, "‚úÖ –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ")
```

> üí° –£ —Ñ–æ—Ç–æ –±—ã–ª–æ `message.photo[-1]`, –ø–æ—Ç–æ–º—É —á—Ç–æ Telegram –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä–æ–≤. –£ –≤–∏–¥–µ–æ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ `message.video`. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.mp4` ‚Äî —Å–∞–º—ã–π —á–∞—Å—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤–∏–¥–µ–æ –≤ Telegram.

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –ª—é–±–æ–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ –∏–∑ Telegram. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å ¬´‚úÖ –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ¬ª, –∞ —Ñ–∞–π–ª –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `videos/`.

---

## üìÅ –®–∞–≥ 3. –ó–∞–º–µ—Ç–∫–∏ –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í –î–Ω–µ 1 –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `notes.json`. –£–¥–æ–±–Ω–æ, –Ω–æ —É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ ‚Äî –ª–æ–≥–∏—á–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –æ—Ç–¥–µ–ª—å–Ω–æ. –°–µ–≥–æ–¥–Ω—è –º—ã —Å–¥–µ–ª–∞–µ–º —Ç–∞–∫:

- –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç **—Å–≤–æ—è –ø–∞–ø–∫–∞** `notes/12345/` (—á–∏—Å–ª–æ ‚Äî —ç—Ç–æ `chat_id`).
- –í–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ ‚Äî —Ñ–∞–π–ª—ã `1.json`, `2.json`, `3.json` –∏ —Ç.–¥. –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª ‚Äî —ç—Ç–æ **–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫** –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–∫–∞–∫ ¬´—Å–Ω–∏–º–æ–∫¬ª —Å–ø–∏—Å–∫–∞).

–¢–∞–∫ –º—ã –∏ —Ä–∞–∑–¥–µ–ª—è–µ–º –∑–∞–º–µ—Ç–∫–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∏ —Ö—Ä–∞–Ω–∏–º –∏—Å—Ç–æ—Ä–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π.

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (—Ä—è–¥–æ–º —Å `os.makedirs("images", ...)` –∏ `os.makedirs("videos", ...)`):

```python
os.makedirs("notes", exist_ok=True)
```

–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é **—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤ –µ–≥–æ –ø–∞–ø–∫—É. –ü–∏—à–∏—Ç–µ –µ—ë **–¥–æ** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ `load_notes` –∏–ª–∏ —Ä—è–¥–æ–º —Å –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏):

```python
def save_notes(chat_id, notes_list):
    path = f'notes/{chat_id}'
    os.makedirs(path, exist_ok=True)

    json_files = [
        f for f in os.listdir(path)
        if f.endswith('.json') and f[:-5].isdigit()
    ]

    if json_files:
        ids = [int(f[:-5]) for f in json_files]
        next_id = max(ids) + 1
    else:
        next_id = 1

    filepath = os.path.join(path, f'{next_id}.json')
    with open(filepath, "w", encoding="utf-8") as f:
        json.dump(notes_list, f, ensure_ascii=False, indent=2)
```

> üí° –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –º—ã —Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —É–∂–µ –µ—Å—Ç—å –≤ –ø–∞–ø–∫–µ (`1.json`, `2.json` ‚Ä¶). –ë–µ—Ä—ë–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä, –ø—Ä–∏–±–∞–≤–ª—è–µ–º 1 ‚Äî –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞. –ï—Å–ª–∏ –ø–∞–ø–∫–∞ –ø—É—Å—Ç–∞—è ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º —Å `1.json`. –¢–∞–∫ –º—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ ¬´—Å–Ω–∏–º–∫–∏¬ª, –∞ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ.

---

## üìù –®–∞–≥ 4. –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É `/note`

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–º–µ—Ç–∫–∏ –º—ã –Ω–µ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –µ—ë –≤ —Å–ø–∏—Å–æ–∫ –≤ –ø–∞–º—è—Ç–∏, –Ω–æ –∏ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –µ–≥–æ –ø–∞–ø–∫—É —á–µ—Ä–µ–∑ `save_notes`.

–í–∞–∂–Ω–æ: –∫–ª—é—á–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ `notes` –∏ –∏–º–µ–Ω–∞ –ø–∞–ø–æ–∫ —Å–¥–µ–ª–∞–µ–º **—Å—Ç—Ä–æ–∫–∞–º–∏** (`str(chat_id)`), —á—Ç–æ–±—ã –≤–µ–∑–¥–µ –±—ã–ª –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –≤–∏–¥ (–∏ –≤ –ø–∞–º—è—Ç–∏, –∏ –≤ –ø—É—Ç—è—Ö –∫ —Ñ–∞–π–ª–∞–º).

–ó–∞–º–µ–Ω–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/note` –Ω–∞ —Ç–∞–∫–æ–π:

```python
@bot.message_handler(commands=['note'])
def add_note(message):
    chat_id = str(message.chat.id)
    text = message.text[6:].strip()

    if not text:
        bot.reply_to(message, "‚ùå –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ /note\n–ü—Ä–∏–º–µ—Ä: /note –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ")
        return

    if chat_id not in notes:
        notes[chat_id] = []

    notes[chat_id].append(text)
    save_notes(chat_id, notes[chat_id])

    bot.reply_to(message, f"‚úÖ –ó–∞–ø–∏—Å–∞–ª: {text}")
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/note –¢–µ—Å—Ç` ‚Äî –≤ –ø–∞–ø–∫–µ `notes/` –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥–ø–∞–ø–∫–∞ —Å –≤–∞—à–∏–º `chat_id`, –∞ –≤ –Ω–µ–π —Ñ–∞–π–ª `1.json` —Å –æ–¥–Ω–æ–π –∑–∞–º–µ—Ç–∫–æ–π.

---

## üìñ –®–∞–≥ 5. –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ—Ç–æ–∫ –∏–∑ –ø–∞–ø–æ–∫ ‚Äî –Ω–æ–≤–∞—è `load_notes`

–†–∞–Ω—å—à–µ `load_notes()` —á–∏—Ç–∞–ª–∞ –æ–¥–∏–Ω —Ñ–∞–π–ª `notes.json`. –¢–µ–ø–µ—Ä—å –∑–∞–º–µ—Ç–∫–∏ –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–∞—Ö `notes/12345/`, `notes/67890/` –∏ —Ç.–¥. –ù—É–∂–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–∏–ª–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å–ø–∏—Å–∫–∞) –ø—Ä–æ—á–∏—Ç–∞—Ç—å **–ø–æ—Å–ª–µ–¥–Ω–∏–π** —Ñ–∞–π–ª –∏–∑ –∫–∞–∂–¥–æ–π —Ç–∞–∫–æ–π –ø–∞–ø–∫–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å `notes`.

–ó–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `load_notes` –Ω–∞ —ç—Ç—É:

```python
def load_notes():
    global notes
    notes = {}
    if not os.path.exists("notes"):
        return

    for chat_id_str in os.listdir("notes"):
        path = os.path.join("notes", chat_id_str)
        if not os.path.isdir(path):
            continue

        json_files = [f for f in os.listdir(path) if f.endswith('.json') and f[:-5].isdigit()]
        if not json_files:
            continue

        ids = [int(f[:-5]) for f in json_files]
        latest_id = max(ids)
        filepath = os.path.join(path, f'{latest_id}.json')
        with open(filepath, "r", encoding="utf-8") as f:
            notes[chat_id_str] = json.load(f)
```

> üí° –ú—ã –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º –ø–æ–¥–ø–∞–ø–∫–∞–º –≤ `notes/`. –í –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∞–ø–∫–µ –∏—â–µ–º —Ñ–∞–π–ª—ã –≤–∏–¥–∞ `1.json`, `2.json` ‚Ä¶ –∏ –±–µ—Ä—ë–º —Ñ–∞–π–ª —Å **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º** ‚Äî —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ. –ó–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ –≤ `notes[chat_id_str]`.

–í –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `/notes` –≤—ã–∑–æ–≤–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –±–æ—Ç —Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è):

```python
@bot.message_handler(commands=['notes'])
def list_notes(message):
    load_notes()
    chat_id = str(message.chat.id)
    if chat_id not in notes or not notes[chat_id]:
        bot.reply_to(message, "üì≠ –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫.")
        return

    note_list = "\n".join(f"{i+1}. {note}" for i, note in enumerate(notes[chat_id]))
    bot.reply_to(message, f"üìù –í–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏:\n{note_list}")
```

–í–∞–∂–Ω–æ: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –Ω—É–∂–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∏–∑ –ø–∞–ø–æ–∫ –≤ –ø–∞–º—è—Ç—å. –ò–Ω–∞—á–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏ —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º –∏ –º—ã —Å–ª—É—á–∞–π–Ω–æ ¬´–∑–∞—Ç—Ä—ë–º¬ª –ø—Ä–æ—à–ª—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –í –±–ª–æ–∫–µ –∑–∞–ø—É—Å–∫–∞ –≤ **—Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ** –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–∑–æ–≤ `load_notes()`:

```python
if __name__ == '__main__':
    load_notes()  # –ø–æ–¥–≥—Ä—É–∂–∞–µ–º –∑–∞–º–µ—Ç–∫–∏ –∏–∑ –ø–∞–ø–æ–∫ notes/{chat_id}/
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Ctrl+C, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.")
    bot.infinity_polling()
```

–ï—Å–ª–∏ –≤—ã –≤ –î–Ω–µ 1 –¥–µ–ª–∞–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (Ctrl+C) –≤ `notes.json`, —ç—Ç–æ—Ç –±–ª–æ–∫ –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å: –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `load_notes()` –∏ `bot.infinity_polling()`, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–µ `/note` –∏ `/save`.

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—É –∑–∞–º–µ—Ç–æ–∫ —á–µ—Ä–µ–∑ `/note`, –∑–∞—Ç–µ–º –≤—ã–∑–æ–≤–∏—Ç–µ `/notes` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞ –≤—ã–∑–æ–≤–∏—Ç–µ `/notes` ‚Äî –∑–∞–º–µ—Ç–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å—Å—è –∏–∑ –ø–∞–ø–æ–∫.

---

## üíæ –®–∞–≥ 6. –ö–æ–º–∞–Ω–¥–∞ `/save` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ ¬´—Å–µ–π—á–∞—Å¬ª

–†–∞–Ω—å—à–µ `/save` —Å–æ—Ö—Ä–∞–Ω—è–ª –≤—Å—ë –≤ –æ–¥–∏–Ω `notes.json`. –¢–µ–ø–µ—Ä—å —É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≤–æ—è –ø–∞–ø–∫–∞: –ø–æ –∫–æ–º–∞–Ω–¥–µ `/save` –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º **—Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤ –µ–≥–æ –ø–∞–ø–∫—É (–Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –æ—á–µ—Ä–µ–¥–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º).

–û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/save`:

```python
@bot.message_handler(commands=['save'])
def force_save(message):
    chat_id = str(message.chat.id)
    if chat_id in notes and notes[chat_id]:
        save_notes(chat_id, notes[chat_id])
        bot.reply_to(message, "üíæ –í—Å–µ –∑–∞–º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!")
    else:
        bot.reply_to(message, "üì≠ –ù–µ—á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å ‚Äî –∑–∞–º–µ—Ç–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç.")
```

> üí° –ú—ã –≤—ã–∑—ã–≤–∞–µ–º `save_notes(chat_id, notes[chat_id])` ‚Äî —Ç–æ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ, –∫—Ç–æ –Ω–∞–∂–∞–ª `/save`. –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—â—ë –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫, –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏–º ¬´–ù–µ—á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å¬ª.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–º–µ—Ç–∫–∏, –Ω–∞–∂–º–∏—Ç–µ `/save` ‚Äî –≤ –ø–∞–ø–∫–µ `notes/–≤–∞—à_chat_id/` –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2.json`).

---

## üîß –®–∞–≥ 7. –ù–µ–±–æ–ª—å—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ö–æ–º–∞–Ω–¥–∞ `/caps` –±–µ–∑ —Ç–µ–∫—Å—Ç–∞

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç —Ç–æ–ª—å–∫–æ `/caps` –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ –Ω–µ–≥–æ, –±–æ—Ç –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏. –û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/caps`:

```python
@bot.message_handler(commands=['caps'])
def send_caps(message):
    msg = message.text[6:].strip()
    if msg:
        bot.reply_to(message, msg.upper())
    else:
        bot.reply_to(message, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ /caps")
```

### –≠—Ö–æ: ¬´–ø—Ä–∏–≤–µ—Ç¬ª –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Ñ—Ä–∞–∑—ã

–°–µ–π—á–∞—Å –±–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ç–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–ø—Ä–∏–≤–µ—Ç¬ª. –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª, –µ—Å–ª–∏ —Å–ª–æ–≤–æ ¬´–ø—Ä–∏–≤–µ—Ç¬ª **–µ—Å—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ø—Ä–∏–≤–µ—Ç –∫–∞–∫ –¥–µ–ª–∞¬ª). –ó–∞–º–µ–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ –≤ —ç—Ö–æ-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ:

```python
if '–ø—Ä–∏–≤–µ—Ç' in user_message.lower():
```

–≤–º–µ—Å—Ç–æ:

```python
if '–ø—Ä–∏–≤–µ—Ç' == user_message.lower():
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: ¬´–ø—Ä–∏–≤–µ—Ç¬ª, ¬´–ü—Ä–∏–≤–µ—Ç!¬ª, ¬´–ø—Ä–∏–≤–µ—Ç –∫–∞–∫ –¥–µ–ª–∞¬ª ‚Äî –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º.

---

## ‚úÖ –ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?

- –î–æ–±–∞–≤–∏–ª–∏ –ø–∞–ø–∫—É `videos/` –∏ –ø—Ä–∏—ë–º –≤–∏–¥–µ–æ (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_video`).
- –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ `notes.json` –≤ –ø–∞–ø–∫–∏ `notes/{chat_id}/` —Å —Ñ–∞–π–ª–∞–º–∏ `1.json`, `2.json` ‚Ä¶
- –ù–∞—É—á–∏–ª–∏—Å—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å ¬´—Å–Ω–∏–º–æ–∫¬ª —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –µ–≥–æ –ø–∞–ø–∫—É (`save_notes`) –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–Ω–∏–º–æ–∫ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ (`load_notes`).
- –û–±–Ω–æ–≤–∏–ª–∏ `/note`, `/notes` –∏ `/save` –ø–æ–¥ –Ω–æ–≤–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ.
- –£–ª—É—á—à–∏–ª–∏ `/caps` (–ø–æ–¥—Å–∫–∞–∑–∫–∞, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π) –∏ —ç—Ö–æ (—Ä–µ–∞–∫—Ü–∏—è –Ω–∞ ¬´–ø—Ä–∏–≤–µ—Ç¬ª –≤ –ª—é–±–æ–π —á–∞—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è).

---

## üìö –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ —Ñ–æ—Ç–æ –≤ `images/`, –∏ –≤–∏–¥–µ–æ –≤ `videos/`, –∏ –∑–∞–º–µ—Ç–∫–∏ –≤ `notes/–≤–∞—à_chat_id/`. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `/notes` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏.
2. –î–æ–±–∞–≤—å—Ç–µ –≤ —Ç–µ–∫—Å—Ç `/help` —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ `/note`, `/notes`, `/save` –∏ —Ç–æ–≥–æ, —á—Ç–æ –±–æ—Ç —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ.
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** —Å–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ ¬´–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏¬ª –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Ç–æ—Ç –∂–µ —Å–ø–∏—Å–æ–∫, —á—Ç–æ –∏ –∫–æ–º–∞–Ω–¥–∞ `/notes` (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å `message.text == "–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏"`, –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑–æ–≤–∏—Ç–µ `list_notes(message)`).