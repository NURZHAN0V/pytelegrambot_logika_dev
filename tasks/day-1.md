# –î–µ–Ω—å 1: –ü–µ—Ä–≤—ã–π –±–æ—Ç –∑–∞ 2 —á–∞—Å–∞ ‚Äî –æ—Ç –Ω—É–ª—è –¥–æ –∫–æ–º–∞–Ω–¥
*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —à–∞–≥–∞–º, –∫–∞–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏*

---

## üìÅ –®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `pytelegrambot` –≤ `Visual Studio Code`.

–¢–µ–ø–µ—Ä—å –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ `pytelegrambot`.

---

## üîê –®–∞–≥ 2. –§–∞–π–ª `.env` ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–æ–∫–µ–Ω–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è!) –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ:

```env
BOT_TOKEN=
```

> üí° –ü–æ–∑–∂–µ –≤—ã –≤—Å—Ç–∞–≤–∏—Ç–µ —Å—é–¥–∞ —Ç–æ–∫–µ–Ω –æ—Ç @BotFather. –°–µ–π—á–∞—Å –æ—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –ø—É—Å—Ç—ã–º ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞.

---

## üß™ –®–∞–≥ 3. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ PowerShell:

```powershell
python -m venv venv
venv\Scripts\Activate.ps1
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è `(venv)`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```powershell
(venv) PS C:\Users\nurzhanov_o\Documents\pytelegrambot>
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç ‚Äî –≤—ã –≤–Ω—É—Ç—Ä–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥—ã Python.

> ‚ö†Ô∏è **–ï—Å–ª–∏ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞** –≤—Ä–æ–¥–µ  
> `Activate.ps1 cannot be loaded because running scripts is disabled on this system`  
> ‚Äî PowerShell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤. –í—ã–ø–æ–ª–Ω–∏—Ç–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∞–Ω—Å–∞):
>
> ```powershell
> Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
> ```
> –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞: `venv\Scripts\Activate.ps1`  
> –õ–∏–±–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:  
> `Set-ExecutionPolicy RemoteSigned` ‚Äî —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞–≤—Å–µ–≥–¥–∞.

---

## üì¶ –®–∞–≥ 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `requirements.txt`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `requirements.txt` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```txt
dotenv
pyTelegramBotAPI
```

> ‚ö†Ô∏è –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ ‚Äî **`dotenv`**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `dotenv`.

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```powershell
pip install -r requirements.txt
```

---

## üß© –®–∞–≥ 5. –ë–∞–∑–æ–≤—ã–π —Ñ–∞–π–ª `main.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `main.py` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:

```python
import os
from dotenv import load_dotenv
import telebot

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω
TELEGRAM_TOKEN = os.environ.get('BOT_TOKEN')

print(TELEGRAM_TOKEN)
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```powershell
python main.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ `None`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ `.env` —Ç–æ–∫–µ–Ω –ø–æ–∫–∞ –Ω–µ —É–∫–∞–∑–∞–Ω.

---

## ‚ùå –®–∞–≥ 6. –°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏ ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

–ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `main.py`:

```python
import os
from dotenv import load_dotenv
import telebot

load_dotenv()

TELEGRAM_TOKEN = os.environ.get('BOT_TOKEN')
if not TELEGRAM_TOKEN:
    raise ValueError("‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env")
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞:

```powershell
python main.py
```

**–û–∂–∏–¥–∞–µ–º–∞—è –æ—à–∏–±–∫–∞:**
```
ValueError: ‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env
```

> ‚úÖ –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∞–º–∞ –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –µ—Å–ª–∏ –≤—ã –∑–∞–±—ã–ª–∏ —Ç–æ–∫–µ–Ω.

---

## üîë –®–∞–≥ 7. –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—Å—Ç–æ—è—â–∏–π —Ç–æ–∫–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram ‚Üí –Ω–∞–π–¥–∏—Ç–µ **@BotFather**.
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `/newbot`.
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `7047199432:AAFAQ3J7TA432235AjHh36043C54r2II4`).
4. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.env`:

```env
BOT_TOKEN=–∑–¥–µ—Å—å_–≤—Å—Ç–∞–≤—å—Ç–µ_—Ç–æ–∫–µ–Ω
```

> üîí –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ Git!

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:

```python
# main.py (–≤—Ä–µ–º–µ–Ω–Ω–æ)
load_dotenv()
TELEGRAM_TOKEN = os.environ.get('BOT_TOKEN')
if not TELEGRAM_TOKEN:
    raise ValueError("‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env")
print("‚úÖ –¢–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω:", TELEGRAM_TOKEN[:10] + "...")  # –ø–æ–∫–∞–∂–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ –¢–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω: 7047199392...
```

---

## ü§ñ –®–∞–≥ 8. –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –±–æ—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `main.py`:

```python
bot = telebot.TeleBot(TELEGRAM_TOKEN)
```

---

## üëã –®–∞–≥ 9. –ü–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚Äî `/start`

–î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:

```python
@bot.message_handler(commands=['start'])
def send_welcome(message):
    name = message.from_user.first_name
    bot.reply_to(message, f"–ü—Ä–∏–≤–µ—Ç, {name}! üëã –Ø —Ç–≤–æ–π –ø–µ—Ä–≤—ã–π Telegram-–±–æ—Ç.")
```

---

## ‚ñ∂Ô∏è –®–∞–≥ 10. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞:

```python
if __name__ == '__main__':
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Ctrl+C, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.")
    bot.infinity_polling()
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```powershell
python main.py
```

**–í—ã–≤–æ–¥:**
```
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Ctrl+C, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.
```

–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ `/start`.  
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å: ¬´–ü—Ä–∏–≤–µ—Ç, [–í–∞—à–µ –∏–º—è]! üëã –Ø —Ç–≤–æ–π –ø–µ—Ä–≤—ã–π Telegram-–±–æ—Ç.¬ª

---

## ‚ÑπÔ∏è –®–∞–≥ 11. –î–æ–±–∞–≤–ª—è–µ–º `/help`

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:

```python
@bot.message_handler(commands=['help'])
def send_help(message):
    help_text = (
        "–Ø —É–º–µ—é:\n"
        "/start ‚Äî –ø–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è\n"
        "/help ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\n"
        "–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å ‚Äî —è –ø–æ–≤—Ç–æ—Ä—é!"
    )
    bot.reply_to(message, help_text)
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ (`Ctrl+C`, –∑–∞—Ç–µ–º `python main.py`) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `/help`.

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞: –∫–æ–º–∞–Ω–¥–∞ `/caps`

### –í–µ—Ä—Å–∏—è 1 (–ø—Ä–æ—Å—Ç–∞—è, –Ω–æ –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)

```python
@bot.message_handler(commands=['caps'])
def send_caps(message):
    msg = message.text  # –ù–∞–ø—Ä–∏–º–µ—Ä: "/caps –ø—Ä–∏–≤–µ—Ç"
    bot.reply_to(message, msg.upper())
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç `/CAPS –ü–†–ò–í–ï–¢`, –∞ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ `–ü–†–ò–í–ï–¢`.

---

### –í–µ—Ä—Å–∏—è 2 (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)

```python
@bot.message_handler(commands=['caps'])
def send_caps(message):
    msg = message.text[6:].strip()  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º "/caps " (6 —Å–∏–º–≤–æ–ª–æ–≤)
    bot.reply_to(message, msg.upper())
```

> üí° –ü–æ—á–µ–º—É `6`? –ü–æ—Ç–æ–º—É —á—Ç–æ `/caps` ‚Äî 5 —Å–∏–º–≤–æ–ª–æ–≤ + –ø—Ä–æ–±–µ–ª = 6.

**–ü—Ä–∏–º–µ—Ä:**  
–í—ã –ø–∏—à–µ—Ç–µ: `/caps hello world`  
–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: `HELLO WORLD`

---

## üí¨ –®–∞–≥ 12. –≠—Ö–æ-—Ä–µ–∂–∏–º ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:

```python
@bot.message_handler(func=lambda message: True)
def echo_all(message):
    user_message = message.text.strip()
    if '–ø—Ä–∏–≤–µ—Ç' == user_message.lower():
        bot.reply_to(message, "–ü—Ä–∏–≤–µ—Ç! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?\n/help ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É")
    else:
        bot.reply_to(message, user_message)
```

> üìù `func=lambda message: True` –æ–∑–Ω–∞—á–∞–µ—Ç: ¬´–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **–≤—Å–µ** —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–ø–∞–ª–∏ –ø–æ–¥ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã¬ª.

---

## ‚å®Ô∏è –®–∞–≥ 13. –ö–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é

–î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–æ `main.py`:

```python
from telebot import types
```

–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é **–¥–æ** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `/start`:

```python
def show_main_menu(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=False)
    btn1 = types.KeyboardButton("–û –Ω–∞—Å")
    btn2 = types.KeyboardButton("–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ")
    btn3 = types.KeyboardButton("–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏")
    markup.add(btn1, btn2, btn3)
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=markup)
```

–û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start` ‚Äî –ø–æ—Å–ª–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –º–µ–Ω—é:

```python
@bot.message_handler(commands=['start'])
def send_welcome(message):
    name = message.from_user.first_name
    bot.reply_to(message, f"–ü—Ä–∏–≤–µ—Ç, {name}! üëã –Ø —Ç–≤–æ–π –ø–µ—Ä–≤—ã–π Telegram-–±–æ—Ç.")
    show_main_menu(message)
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

–° –ü–ö –∫–Ω–æ–ø–∫–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫:

![–ü—Ä–∏–º–µ—Ä 1](/tasks/images/img1.webp)

–° —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø—Ä–∏ `resize_keyboard=True`:

![–ü—Ä–∏–º–µ—Ä 2](/tasks/images/img2.webp)

–° —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø—Ä–∏ `resize_keyboard=False`:

![–ü—Ä–∏–º–µ—Ä 3](/tasks/images/img3.webp)

> üí° `resize_keyboard=True` ‚Äî –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ (—É–¥–æ–±–Ω–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ).  
> `resize_keyboard=False` ‚Äî –∫–Ω–æ–ø–∫–∏ –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é.

---

## üìå –®–∞–≥ 14. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ ¬´–û –Ω–∞—Å¬ª

–î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏:

```python
@bot.message_handler(func=lambda message: message.text == "–û –Ω–∞—Å")
def about_us(message):
    bot.send_message(
        message.chat.id,
        "ü§ñ –Ø ‚Äî —É—á–µ–±–Ω—ã–π –±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏!\n"
        "–¶–µ–ª—å: –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–µ–ª–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –≤–µ—â–∏."
    )
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–û –Ω–∞—Å¬ª.

---

## üì∏ –®–∞–≥ 15. –ü—Ä–∏—ë–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —Ñ–æ—Ç–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–¥–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏):

```python
os.makedirs("images", exist_ok=True)
```

–î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

```python
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ file_id
last_photo_file_id = None

@bot.message_handler(content_types=['photo'])
def handle_photo(message):
    global last_photo_file_id
    file_id = message.photo[-1].file_id  # —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ —Ñ–æ—Ç–æ –∏–∑ —Å–ø–∏—Å–∫–∞
    last_photo_file_id = file_id
    file_info = bot.get_file(file_id)
    downloaded_file = bot.download_file(file_info.file_path)
    with open(f"images/{file_id}.jpg", 'wb') as f:
        f.write(downloaded_file)
    bot.reply_to(message, "üì∏ –°–æ—Ö—Ä–∞–Ω–∏–ª!")
```

> üí° Telegram –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ç–æ; `message.photo[-1]` ‚Äî –Ω–∞–∏–±–æ–ª—å—à–µ–µ.

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞. –ù–∞–∂–º–∏—Ç–µ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ¬ª –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Äî –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–ø–∫—É `images/`.

---

## üìù –®–∞–≥ 16. –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –≤ –ø–∞–º—è—Ç–∏

–°–µ–π—á–∞—Å –∑–∞–º–µ—Ç–∫–∏ –±—É–¥—É—Ç –∂–∏—Ç—å –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏: –ø–æ–∫–∞ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω ‚Äî –≤—Å—ë –Ω–∞ –º–µ—Å—Ç–µ, –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è ‚Äî —Å–ø–∏—Å–æ–∫ –æ–±–Ω—É–ª–∏—Ç—Å—è. –ü–æ—Ç–æ–º –Ω–∞—É—á–∏–º—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ñ–∞–π–ª.

–°–æ–∑–¥–∞–π—Ç–µ **–≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä—è–¥–æ–º —Å `last_photo_file_id`):

```python
notes = {}  # –∫–ª—é—á: chat_id, –∑–Ω–∞—á–µ–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ (–∑–∞–º–µ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
```

> üí° **–°–ª–æ–≤–∞—Ä—å** ‚Äî –∫–∞–∫ –ø–∞–ø–∫–∞ —Å –Ω–∞–∫–ª–µ–π–∫–∞–º–∏: —É –∫–∞–∂–¥–æ–≥–æ `chat_id` —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫, —á—Ç–æ–±—ã —É —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π –∑–∞–ø–∏—Å–∏ –Ω–µ —Å–º–µ—à–∏–≤–∞–ª–∏—Å—å.

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É **`/note`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É:

```python
@bot.message_handler(commands=['note'])
def add_note(message):
    chat_id = message.chat.id
    text = message.text[6:].strip()  # –ø—Ä–æ–ø—É—Å–∫–∞–µ–º "/note " (6 —Å–∏–º–≤–æ–ª–æ–≤)
    if not text:
        bot.reply_to(message, "‚ùå –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ /note\n–ü—Ä–∏–º–µ—Ä: /note –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ")
        return

    if chat_id not in notes:
        notes[chat_id] = []

    notes[chat_id].append(text)
    bot.reply_to(message, f"‚úÖ –ó–∞–ø–∏—Å–∞–ª: {text}")
```

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É **`/notes`** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏:

```python
@bot.message_handler(commands=['notes'])
def list_notes(message):
    chat_id = message.chat.id
    if chat_id not in notes or not notes[chat_id]:
        bot.reply_to(message, "üì≠ –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫.")
        return

    note_list = "\n".join(f"{i+1}. {note}" for i, note in enumerate(notes[chat_id]))
    bot.reply_to(message, f"üìù –í–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏:\n{note_list}")
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram:

- `/note –ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ`
- `/note –°–¥–µ–ª–∞—Ç—å –î–ó`
- `/notes` ‚Üí –±–æ—Ç –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫.

> üí° –ß—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ **¬´–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏¬ª** –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Ç–æ—Ç –∂–µ —Å–ø–∏—Å–æ–∫, –¥–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å `message.text == "–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏"` –∏ –≤—ã–∑–æ–≤–æ–º –ª–æ–≥–∏–∫–∏ –∫–∞–∫ –≤ `list_notes` (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `list_notes(message)`).

---

## üíæ –®–∞–≥ 17. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª `notes.json`

–ß—Ç–æ–±—ã –∑–∞–º–µ—Ç–∫–∏ –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Ö –≤ —Ñ–∞–π–ª –∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ.

–î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞:

```python
import json
```

–ó–∞–¥–∞–π—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ –∏ –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî **—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å** –∏ **–∑–∞–≥—Ä—É–∑–∏—Ç—å**:

```python
NOTES_FILE = "notes.json"

def save_notes():
    with open(NOTES_FILE, "w", encoding="utf-8") as f:
        json.dump(notes, f, ensure_ascii=False, indent=2)

def load_notes():
    global notes
    try:
        with open(NOTES_FILE, "r", encoding="utf-8") as f:
            notes = json.load(f)
    except (FileNotFoundError, json.JSONDecodeError):
        notes = {}
```

> üí° `FileNotFoundError` ‚Äî —Ñ–∞–π–ª–∞ –µ—â—ë –Ω–µ—Ç (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫). `JSONDecodeError` ‚Äî —Ñ–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –∏–ª–∏ –ø—É—Å—Ç–æ–π. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω–∞—á–∏–Ω–∞–µ–º —Å –ø—É—Å—Ç–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è `{}`.

–í –±–ª–æ–∫–µ –∑–∞–ø—É—Å–∫–∞ **—Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∑–∞–º–µ—Ç–∫–∏**, –∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (Ctrl+C) ‚Äî **—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ**:

```python
if __name__ == '__main__':
    load_notes()  # –∑–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Ctrl+C, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.")
    try:
        bot.infinity_polling()
    except KeyboardInterrupt:
        print("\nüõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞...")
        save_notes()
        print("üíæ –ó–∞–º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ notes.json")
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—É –∑–∞–º–µ—Ç–æ–∫, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (Ctrl+C) –∏ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è.

---

## üîÑ –®–∞–≥ 18. –ö–æ–º–∞–Ω–¥–∞ `/save` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

–ò–Ω–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ ¬´–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å¬ª, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```python
@bot.message_handler(commands=['save'])
def force_save(message):
    save_notes()
    bot.reply_to(message, "üíæ –í—Å–µ –∑–∞–º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!")
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: –Ω–∞–ø–∏—à–∏—Ç–µ `/save` ‚Äî –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç, —á—Ç–æ –∑–∞–º–µ—Ç–∫–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ `notes.json`.

---

## ‚úÖ –ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–ª–∏ —Å–µ–≥–æ–¥–Ω—è?

- –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º  
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏–ª–∏ —Ç–æ–∫–µ–Ω –≤ `.env`  
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –∫–æ–º–∞–Ω–¥—ã `/start`, `/help`, `/caps`  
- –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —ç—Ö–æ-—Ä–µ–∂–∏–º —Å —É—Å–ª–æ–≤–∏–µ–º –Ω–∞ ¬´–ø—Ä–∏–≤–µ—Ç¬ª  
- –£–≤–∏–¥–µ–ª–∏, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞  
- –ó–∞–ø—É—Å—Ç–∏–ª–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ Telegram-–±–æ—Ç–∞!  
- –î–æ–±–∞–≤–∏–ª–∏ –∫–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (`ReplyKeyboardMarkup`)  
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ ¬´–û –Ω–∞—Å¬ª  
- –ü—Ä–∏—ë–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≤ –ø–∞–ø–∫—É `images/`  
- –ó–∞–º–µ—Ç–∫–∏ –≤ –ø–∞–º—è—Ç–∏ (`/note`, `/notes`) –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `notes.json`  
- –ö–æ–º–∞–Ω–¥—É `/save` –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞

---

## üìö –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ (–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ)

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç: –∫–æ–º–∞–Ω–¥—ã `/start`, `/help`, `/caps`, –∫–Ω–æ–ø–∫–∏, –ø—Ä–∏—ë–º —Ñ–æ—Ç–æ, `/note`, `/notes`, `/save` ‚Äî –∏ —á—Ç–æ –∑–∞–º–µ—Ç–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.  
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏ –∏–ª–∏ –≤–æ–∑—Ä–∞—Å—Ç.  
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** —Å–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ `/caps` —Ä–∞–±–æ—Ç–∞–ª–∞ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ—Å–ª–µ –Ω–µ—ë –Ω–∏—á–µ–≥–æ –Ω–µ—Ç (–≤—ã–≤–æ–¥–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É).  
4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** –ø—Ä–∏–≤—è–∂–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏¬ª –∫ —Å–ø–∏—Å–∫—É –∑–∞–º–µ—Ç–æ–∫ (–∫–∞–∫ –≤ –ø–æ–¥—Å–∫–∞–∑–∫–µ –≤ –®–∞–≥–µ 16).

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ: –ë–æ—Ç-–æ–ø—Ä–æ—Å–Ω–∏–∫

–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –∫–æ–º–∞–Ω–¥–µ `/quiz` –∑–∞–¥–∞—ë—Ç —Ç—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞ **–ø–æ –æ–¥–Ω–æ–º—É** –∏ –≤ –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∏—Ç —Å–≤–æ–¥–∫—É —Å –æ—Ç–≤–µ—Ç–∞–º–∏.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

- –ü–æ –∫–æ–º–∞–Ω–¥–µ `/quiz` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ–ø—Ä–æ—Å.
- –í–æ–ø—Ä–æ—Å—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:
  1. ¬´–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?¬ª
  2. ¬´–°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?¬ª
  3. ¬´–õ—é–±–∏–º—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ —à–∫–æ–ª–µ?¬ª
- –ü–æ—Å–ª–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç –ø–∏—à–µ—Ç:  
  `–ü—Ä–∏–≤–µ—Ç, [–ò–º—è]! –¢–µ–±–µ [–≤–æ–∑—Ä–∞—Å—Ç] –ª–µ—Ç, –∏ —Ç—ã –ª—é–±–∏—à—å [–ø—Ä–µ–¥–º–µ—Ç].`
- –û—Ç–≤–µ—Ç—ã **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ñ–∞–π–ª** ‚Äî —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–æ—Å—Ç–æ—è–Ω–∏—è ¬´–≤—Ä—É—á–Ω—É—é¬ª**

–ú–æ–∂–Ω–æ –∑–∞–≤–µ—Å—Ç–∏ –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è:

```python
user_state = {}   # chat_id ‚Üí –Ω–æ–º–µ—Ä —à–∞–≥–∞ (0, 1, 2)
user_answers = {} # chat_id ‚Üí {'name': ..., 'age': ..., 'subject': ...}
```

- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç `/quiz`, –ø–æ–ª–æ–∂–∏—Ç–µ `user_state[chat_id] = 0` –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å.
- –í **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ** (–∫–æ—Ç–æ—Ä—ã–π –ª–æ–≤–∏—Ç –ª—é–±–æ–π —Ç–µ–∫—Å—Ç) –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: –µ—Å–ª–∏ `chat_id in user_state`, –∑–Ω–∞—á–∏—Ç, –∏–¥—ë—Ç –æ–ø—Ä–æ—Å ‚Äî –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –æ—Ç–≤–µ—Ç, —É–≤–µ–ª–∏—á—å—Ç–µ —à–∞–≥ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏ –≤—ã–≤–µ–¥–∏—Ç–µ —Å–≤–æ–¥–∫—É, –ø–æ—Ç–æ–º —É–¥–∞–ª–∏—Ç–µ `chat_id` –∏–∑ `user_state`.

–¢–∞–∫ –º—ã –∏–º–∏—Ç–∏—Ä—É–µ–º –ø—Ä–æ—Å—Ç—É—é ¬´–º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π¬ª (FSM), –∫–æ—Ç–æ—Ä—É—é –ø–æ—Ç–æ–º –∏–∑—É—á–∏–º –≤ aiogram.